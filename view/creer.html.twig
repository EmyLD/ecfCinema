<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accueil</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
<main>
    {% if message is null %}
    <div class="row align-items-start">
        <div class="col-2"></div>
        <div class="col-8">
            <form action="creer" method="post" name="formulaire">
                <div class="container">
                    <div class="col-12">
                        <label for="title">
                            <h5>Titre</h5><br>
                        </label>
                        <input class="col-5" type="text" placeholder="Renseignez le titre" name="title">
                        <label for="years">
                            <h5>Année</h5><br>
                        </label>
                        <input class="col-5" type="text" placeholder="Renseignez l'année" name="years">
                    </div>
                    <label for="poster">
                        <h5>Affiche</h5>
                    </label>
                    <input type="text" placeholder="Mettez l'URL de l'affiche" name="poster">
                    <label for="director">
                        <h5>Réalisateur</h5>
                    </label>
                    <input type="text" placeholder="Mettez le réalisateur" name="director">
                    <div id="roles">
                        <h5>Rôles</h5><br>
                        <label for="character1">
                            <h5>Personnage</h5>
                        </label>
                        <input type="text" placeholder="Renseignez un personnage" name="character[]">
                        <label for="name1">
                            <h5>Nom</h5>
                        </label>
                        <input type="text" placeholder="Renseignez un nom" name="name[]">
                        <label for="firstname1">
                            <h5>Prénom</h5>
                        </label>
                        <input type="text" placeholder="Renseignez un prénom" name="firstname[]">
                    </div>
                    <button type="button" onclick="addRole()">Ajouter Rôle</button>
                    <button type="button" onclick="removeRole()">Supprimer Rôle</button>
                    <button type="submit">Créer Film</button>
                </div>
            </form>
        </div>
        <div class="col-2"></div>
    </div>
    {% else %}
    <div>
        <p>{{ message }}:</p><br>
        {% if movie is defined %}
        {{ movie.getTitle }}:
        {{ movie.getYear }}:
        {{ movie.getPoster }}:
        {{ movie.getDirector }}
        {% endif %}
    </div>
    {% endif %}
</main>
<script>
    var roleCount = 1;

    function addRole() {
        roleCount++;
        const rolesDiv = document.getElementById('roles');

        const roleHtml = `
            <div id="role${roleCount}">
                <label for="character${roleCount}">
                    <b>Personnage</b>
                </label>
                <input type="text" placeholder="Renseignez un personnage" name="character[]" required>
                <label for="name${roleCount}">
                    <b>Nom</b>
                </label>
                <input type="text" placeholder="Renseignez un nom" name="name[]" required>
                <label for="firstname${roleCount}">
                    <b>Prénom</b>
                </label>
                <input type="text" placeholder="Renseignez un prénom" name="firstname[]" required>
                <button type="button" onclick="removeRole(${roleCount})">Supprimer</button>
            </div>
        `;

        rolesDiv.innerHTML += roleHtml;
    }

    function removeRole(roleId) {
        const roleToRemove = document.getElementById('role' + roleId);
        roleToRemove.parentNode.removeChild(roleToRemove);
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>